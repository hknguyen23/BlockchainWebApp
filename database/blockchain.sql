-- DROP DATABASE blockchainwebapp;
CREATE DATABASE blockchainwebapp;
USE blockchainwebapp;

DROP TABLE IF EXISTS `Users`;
CREATE TABLE Users(
    ID VARCHAR(100) NOT NULL,
    Name VARCHAR(50) NOT NULL,
    Username VARCHAR(30),
    Password VARCHAR(1000),
    Email VARCHAR(100) NOT NULL,
    WalletAddress VARCHAR(200),
    PRIMARY KEY(ID)
);

DROP TABLE IF EXISTS `Wallets`;
CREATE TABLE Wallets(
    Balance FLOAT,
    PrivateKey VARCHAR(100),
    PublicKey VARCHAR(200),
    PRIMARY KEY(PublicKey)
);

DROP TABLE IF EXISTS `Transactions`;
CREATE TABLE Transactions(
    ID VARCHAR(100) NOT NULL,
    Amount FLOAT NOT NULL,
    DateAdded DATETIME,
    SenderAddress VARCHAR(200),
    ReceiverAddress VARCHAR(200),
    PRIMARY KEY(ID)
);

ALTER TABLE Transactions ADD CONSTRAINT FK_Transactions_Sender_Address FOREIGN KEY(SenderAddress) REFERENCES Wallets(PublicKey);
ALTER TABLE Transactions ADD CONSTRAINT FK_Transactions_Receiver_Address FOREIGN KEY(ReceiverAddress) REFERENCES Wallets(PublicKey);
ALTER TABLE Users ADD CONSTRAINT FK_Users_Wallets FOREIGN KEY(WalletAddress) REFERENCES Wallets(PublicKey);

INSERT INTO `wallets` VALUES 
	(100, '6288989c7f634528cefe838bc5dd0e28005b23a98aa24b3d13e008a94e1cfbe0', '04c755e771e02aec49f18c392fe5758e6df44c3291b8a12c4382299066f248214162dc92938c56bd70576bf195e0e2b4225a70f9e50b86b8b88ffdfe5257145f7a'),
	(100, 'b153f9ce26d28f5518fa6f8cb70f12e51fd064a7550941cf9f1bbcf7e248898b', '0415d2c354e039a0dd780835bc0433f2b652f151566e495bed57810b2c7648105d202bd3273e43ab336b25d62db0219e82e2a7ffef056dda1317b8515df279344f'),
	(100, '3e0a26b40cdc7130111e953df03c902fe70dbad8fdce130f55bd93ac29c886e0', '04a77e9fc84a2fc34169a43cd0dd2fd4bb37c23254243ae030363d66107be286d136b1638a0e9e6a252a7d60c41527302789eb710e262b0279a7983429aa96403c'),
	(100, 'a8ff31aa49ce12399ca1a92d5816bc59a5f9db280b36943c5731419839d53f27', '0498ef8047d81e55a4bfd7c76e514b4546088d789f92f7ba8135f6cf1e65390423b3644334dfd07fbdaac93dd7d798546ec3d384adea11745ac1a6b03233f870ee')
;
    
-- Password: 123456
INSERT INTO `users` VALUES 
	('1', 'Nguyễn Văn A', 'user1', '$2a$10$eOJ7p0X0Lva0KcqbB3im1usbd.zPFxSFIeuaeqVWlFgFZUuJ8h5Da', 'user1@gmail.com', '04c755e771e02aec49f18c392fe5758e6df44c3291b8a12c4382299066f248214162dc92938c56bd70576bf195e0e2b4225a70f9e50b86b8b88ffdfe5257145f7a'),
	('2', 'Nguyễn Văn B', 'user2', '$2a$10$eOJ7p0X0Lva0KcqbB3im1usbd.zPFxSFIeuaeqVWlFgFZUuJ8h5Da', 'user2@gmail.com', '0415d2c354e039a0dd780835bc0433f2b652f151566e495bed57810b2c7648105d202bd3273e43ab336b25d62db0219e82e2a7ffef056dda1317b8515df279344f'),
	('3', 'Trần Thị C', 'user3', '$2a$10$eOJ7p0X0Lva0KcqbB3im1usbd.zPFxSFIeuaeqVWlFgFZUuJ8h5Da', 'user3@gmail.com', '04a77e9fc84a2fc34169a43cd0dd2fd4bb37c23254243ae030363d66107be286d136b1638a0e9e6a252a7d60c41527302789eb710e262b0279a7983429aa96403c'),
	('4', 'Hồ Khánh Nguyên', 'hknguyen', '$2a$10$eOJ7p0X0Lva0KcqbB3im1usbd.zPFxSFIeuaeqVWlFgFZUuJ8h5Da', 'hokhanhnguyen@gmail.com', '0498ef8047d81e55a4bfd7c76e514b4546088d789f92f7ba8135f6cf1e65390423b3644334dfd07fbdaac93dd7d798546ec3d384adea11745ac1a6b03233f870ee')
;
